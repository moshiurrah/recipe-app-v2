3 Jun 15:16:58 - Connected to Mongo on mongodb://localhost:27017/recipeV2local
[0mGET /api/health-check [32m200 [0m6.017 ms - 3[0m
3 Jun 15:16:58 - OK!
[0mGET /api/users [32m200 [0m16.154 ms - 1644[0m
[0mPOST /api/users/ [32m200 [0m132.636 ms - 269[0m
[0mGET /api/users/5b13a3faebb69733540b9589 [32m200 [0m3.005 ms - 195[0m
[0mPUT /api/users/5b13a3faebb69733540b9589 [32m200 [0m98.678 ms - 265[0m
[0mDELETE /api/users/5b13a3faebb69733540b9589 [32m200 [0m3.937 ms - 191[0m
# TOC
   - [Recipe App User API](#recipe-app-user-api)
<a name=""></a>
 
<a name="recipe-app-user-api"></a>
# Recipe App User API
GETS health check.

```js
this.timeout(4000);
request(app)
  .get("/api/health-check")
  .set('Accept', 'application/json')
  .expect(200)
  .end(function (err, res) {
    if (err) done(new Error(res.text));
    // util.log(JSON.parse(res.text));
    util.log(res.text);
    done();
  });
```

GETS All Users.

```js
this.timeout(4000);
request(app)
  .get("/api/users")
  .expect(200)
  .end(function (err, res) {
    if (err) done(new Error(res.text));
    done();
  });
```

CREATE One User.

```js
this.timeout(4000);
request(app)
  .post("/api/users/")
  .send(defUser)
  .expect(200)
  .end(function (err, res) {
    if (err) done(new Error(res.text));
    let response = (JSON.parse(res.text));
    // userObj = {...response};
    defUser.local.password = null;
    response.local.password = null;
    expect(response.local).to.deep.equal(defUser.local);
    userId = response._id;
    // console.log(userObj);
    done();
  });
```

READ One User.

```js
this.timeout(4000);
request(app)
  .get(`/api/users/${userId}`)
  .set('Accept', 'application/json')
  .expect(200)
  .end(function (err, res) {
    if (err) done(new Error(res.text));
    // console.log(JSON.parse(res.text)[0]._id);
    // console.log(userId);
    expect(JSON.parse(res.text)._id).to.equal(userId);
    done();
    // process.exit();
  });
```

UPDATE One User.

```js
this.timeout(4000);
request(app)
  .put(`/api/users/${userId}`)
  .set('Accept', 'application/json')
  .send({ local: { email: "fromMocha@jocha.com" } })
  .expect(200)
  .end(function (err, res) {
    if (err) done(new Error(res.text));
    // user = JSON.parse(res.text) || undefined;
    // console.log(res.text);
    expect(JSON.parse(res.text)._id).to.equal(userId);
    expect(JSON.parse(res.text).local.email).to.equal("fromMocha@jocha.com");
    done();
    // process.exit();
  });
```

DELETE One User.

```js
this.timeout(4000);
request(app)
  .delete(`/api/users/${userId}`)
  .set('Accept', 'application/json')
  .expect(200)
  .end(function (err, res) {
    if (err) done(new Error(res.text));
    user = JSON.parse(res.text) || undefined;
    // console.log(user);
    done();
    // process.exit();
  });
```

